# Aether - Environment Variables
# Copy to .env and fill values: cp .env.example .env
# For production deployment steps, see PRODUCTION_DEPLOYMENT.md

# -----------------------------------------------------------------------------
# Core secrets and provider keys
# -----------------------------------------------------------------------------
OPENAI_API_KEY=sk-...
DEEPGRAM_API_KEY=
ELEVENLABS_API_KEY=
SARVAM_API_KEY=

# -----------------------------------------------------------------------------
# Auth and web origin
# -----------------------------------------------------------------------------
# Session encryption key for dashboard + orchestrator crypto integration.
# Generate: openssl rand -base64 32
BETTER_AUTH_SECRET=change_me_in_production_use_openssl_rand

# Public base URL of dashboard.
# Dev:  http://localhost:3000
# Prod: https://app.example.com
BETTER_AUTH_URL=http://localhost:3000

# Extra allowed auth origins (comma-separated), optional.
BETTER_AUTH_TRUSTED_ORIGINS=

# -----------------------------------------------------------------------------
# Infrastructure and routing
# -----------------------------------------------------------------------------
POSTGRES_PASSWORD=aether_dev

# Domain used by reverse proxy / Traefik / Caddy.
# Dev: localhost:3000
# Prod: app.example.com
DOMAIN=localhost:3000

# Docker image namespace for production images.
DOCKERHUB_USERNAME=yourdockerhubuser

# Frontend direct orchestrator override.
# Leave blank for same-origin /api through reverse proxy.
NEXT_PUBLIC_ORCHESTRATOR_URL=

# CORS for orchestrator; comma-separated list.
CORS_ORIGINS=http://localhost:3000

# -----------------------------------------------------------------------------
# Agent provisioning (orchestrator -> dynamic per-user containers)
# -----------------------------------------------------------------------------
# Shared secret between orchestrator and agent containers.
# Generate: openssl rand -hex 32
AGENT_SECRET=dev_agent_secret_change_in_production

# Agent image used by orchestrator when spawning containers.
AGENT_IMAGE=core-ai-agent:latest

# Overlay network name reachable by orchestrator-spawned agents.
# In Swarm, set to your fixed overlay network name (e.g. aether_network).
AGENT_NETWORK=core-ai_default

# Idle minutes before orchestrator reaps inactive agent containers.
AGENT_IDLE_TIMEOUT=30

# Dev-only host path for hot-reload bind mounts into agent containers.
AGENT_DEV_ROOT=

# Shared models cache mounted into orchestrator and agent containers.
AGENT_SHARED_MODELS_HOST_PATH=./.cache/models
AGENT_SHARED_MODELS_ORCH_PATH=/shared-models
AGENT_SHARED_MODELS_CONTAINER_PATH=/models

# -----------------------------------------------------------------------------
# OAuth providers for plugins
# -----------------------------------------------------------------------------
# Google redirect URI:
#   http://localhost:3000/api/plugins/gmail/oauth/callback (dev)
#   https://<domain>/api/plugins/gmail/oauth/callback (prod)
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=

# Spotify redirect URI:
#   http://localhost:3000/api/plugins/spotify/oauth/callback (dev)
#   https://<domain>/api/plugins/spotify/oauth/callback (prod)
SPOTIFY_CLIENT_ID=
SPOTIFY_CLIENT_SECRET=

# -----------------------------------------------------------------------------
# Agent runtime defaults (can be overridden per user from dashboard)
# -----------------------------------------------------------------------------
AETHER_HOST=0.0.0.0
AETHER_PORT=8000
AETHER_DB_PATH=aether_memory.db
AETHER_WORKING_DIR=/workspace

# STT
AETHER_STT_PROVIDER=deepgram
AETHER_STT_MODEL=nova-3
AETHER_STT_LANGUAGE=en
AETHER_STT_SAMPLE_RATE=16000
AETHER_STT_ENCODING=linear16
AETHER_STT_UTTERANCE_END_MS=1200
AETHER_STT_ENDPOINTING_MS=300
AETHER_STT_RECONNECT_ATTEMPTS=5
AETHER_STT_RECONNECT_DELAY=1.0
AETHER_STT_PRE_ROLL_MS=500
AETHER_STT_IDLE_DISCONNECT_S=5.0

# LLM
AETHER_LLM_PROVIDER=openai
AETHER_LLM_MODEL=gpt-4o
AETHER_LLM_VOICE_MODEL=gpt-4o-mini
AETHER_LLM_MAX_TOKENS=500
AETHER_LLM_TEMPERATURE=0.7
AETHER_LLM_MAX_HISTORY_TURNS=20

# TTS
AETHER_TTS_PROVIDER=openai
AETHER_TTS_MODEL=tts-1
AETHER_TTS_VOICE=nova
AETHER_TTS_TIMEOUT=15.0

# Sarvam-specific TTS options
AETHER_SARVAM_MODEL=bulbul:v3
AETHER_SARVAM_SPEAKER=shubh
AETHER_SARVAM_LANGUAGE=en-IN
AETHER_SARVAM_SAMPLE_RATE=24000

# Memory / persistence
AETHER_EMBEDDING_DIM=1536
AETHER_MEMORY_THRESHOLD=0.3
AETHER_MEMORY_SEARCH_LIMIT=5
AETHER_ACTION_RETENTION_DAYS=7
AETHER_SESSION_SUMMARY_LIMIT=3
AETHER_ACTION_OUTPUT_MAX_CHARS=1000

# Agent behavior
AETHER_BASE_STYLE=default
AETHER_CUSTOM_INSTRUCTIONS=
AETHER_WS_SEND_TIMEOUT=5.0
AETHER_DEBOUNCE_DELAY=0.3

# Kernel worker tuning
AETHER_KERNEL_WORKERS_INTERACTIVE=2
AETHER_KERNEL_WORKERS_BACKGROUND=2
AETHER_INTERACTIVE_QUEUE_LIMIT=20
AETHER_BACKGROUND_QUEUE_LIMIT=50

# VAD defaults
AETHER_VAD_MODE=off
AETHER_VAD_MODEL_PATH=
AETHER_VAD_SAMPLE_RATE=16000
AETHER_VAD_ACTIVATION_THRESHOLD=0.5
AETHER_VAD_DEACTIVATION_THRESHOLD=0.35
AETHER_VAD_MIN_SPEECH_DURATION=0.05
AETHER_VAD_MIN_SILENCE_DURATION=0.55

# Orchestrator bootstrap defaults for dynamic agent containers
AETHER_VAD_MODE_DEFAULT=off
AETHER_VAD_MODEL_RELATIVE_PATH=silero/silero_vad.onnx
AETHER_VAD_MODEL_URL=
AETHER_VAD_MODEL_SHA256=

# Turn detection defaults
AETHER_TURN_DETECTION_MODE=off
AETHER_TURN_MODEL_TYPE=en
AETHER_TURN_MODEL_REPO=livekit/turn-detector
AETHER_TURN_MODEL_REVISION=v1.2.2-en
AETHER_TURN_MODEL_FILENAME=model.onnx
AETHER_TURN_MODEL_DIR=/models/turn-detector
AETHER_TURN_MODEL_RELATIVE_DIR=turn-detector
AETHER_TURN_MODEL_FILES=onnx/model.onnx,languages.json,tokenizer.json,tokenizer_config.json,special_tokens_map.json,added_tokens.json,merges.txt,vocab.json
AETHER_TURN_MIN_ENDPOINTING_DELAY=0.5
AETHER_TURN_MAX_ENDPOINTING_DELAY=3.0
AETHER_TURN_INFERENCE_TIMEOUT_SECONDS=2.0
AETHER_TURN_DETECTION_MODE_DEFAULT=off

# WebRTC
AETHER_WEBRTC_SESSION_TTL=600
AETHER_WEBRTC_DISCONNECT_GRACE=10
WEBRTC_STUN_URL=stun:stun.l.google.com:19302
WEBRTC_TURN_URL=
WEBRTC_TURN_USERNAME=
WEBRTC_TURN_CREDENTIAL=
AETHER_AGENT_HOST=

# Telephony (optional)
AETHER_TELEPHONY_ENABLED=false
AETHER_TELEPHONY_PROVIDER=twilio
AETHER_TELEPHONY_SAMPLE_RATE=8000
AETHER_TELEPHONY_ENCODING=mulaw
VOBIZ_AUTH_ID=
VOBIZ_AUTH_TOKEN=
VOBIZ_FROM_NUMBER=
AETHER_USER_PHONE_NUMBER=

# Logging
AETHER_LOG_COLOR=auto
AETHER_LOG_LEVEL=INFO
AETHER_LOG_FORMAT=text
